(self.webpackChunk_gooddata_sdk_ui_web_components=self.webpackChunk_gooddata_sdk_ui_web_components||[]).push([[952],{39108:(e,i,t)=>{t.d(i,{E:()=>M,F:()=>g});var r=t(91486),a=t(61550),s=t(56130),o=t(33082),n=t(1662),l=t(16473),d=t(14215),m=t(33692),u=t(74627),c=t(73734),h=t(81028),f=t.n(h),I=t(76917),z=t.n(I),b=t(81986),p=t.n(b);class g{static from(e){return new g(e)}constructor(e){this.state=e,this.denormalizeDimDescriptors=e=>{var i;const t=null===(i=e.find((e=>e.headers.find((e=>(0,r.tT)(e))))))||void 0===i?void 0:i.headers.find((e=>(0,r.tT)(e)));return z()(e,(e=>{var i;if((0,r._w)(e)){const i=this.originalLocalId(e.attributeHeader.localIdentifier),t=this.originalAttributes[i],r=(0,a.pV)(t)||e.attributeHeader.formOf.name;return{attributeHeader:Object.assign(Object.assign({},e.attributeHeader),{localIdentifier:i,formOf:Object.assign(Object.assign({},e.attributeHeader.formOf),{name:r})})}}if((0,r.Bv)(e)){const a=this.originalLocalId(e.measureHeaderItem.localIdentifier),o=this.originalMeasures[a],n=(0,s.pY)(o),l=(0,r.tT)(t)&&(null===(i=t.measureGroupHeader.items.find((e=>this.originalLocalId(e.measureHeaderItem.localIdentifier)===n)))||void 0===i?void 0:i.measureHeaderItem.format),d=(0,s.Lc)(o)||n&&(0,s.Lc)(this.originalMeasures[n])||l||e.measureHeaderItem.format,m=this.originalMeasureTitle(o,e.measureHeaderItem.name);return{measureHeaderItem:Object.assign(Object.assign({},e.measureHeaderItem),{localIdentifier:a,format:d,name:m})}}}))},this.denormalizeHeaders=e=>z()(e,(e=>{if((0,r.AM)(e))return{measureHeaderItem:{name:this.fillOriginalMeasureTitle(e.measureHeaderItem.name),order:e.measureHeaderItem.order}}})),this.originalLocalId=e=>{const i=this.state.n2oMap[e];return(0,c.kG)(i,`mapping from normalized to real localId does not exist. Normalized: ${e}`),i},this.fillOriginalMeasureTitle=e=>{const i=this.state.n2oMap[e];if(!i)return e;const t=this.originalMeasures[i];return t?this.originalMeasureTitle(t,e):e},this.originalMeasureTitle=(e,i)=>(0,s.F8)(e)||(0,s.JL)(e)||i,this.originalAttributes=p()(e.original.attributes,a.WP),this.originalMeasures=p()(e.original.measures,s.i1)}}class M{static normalize(e,i){return new M(e,i).normalize()}constructor(e,i={}){this.original=e,this.options=i,this.o2nMap={},this.n2oMap={},this.originalMeasures=new Map,this.alreadyNormalized=[],this.createUniqueMapping=(e,i)=>{(0,c.kG)(!this.o2nMap[e],`duplicate localId used in execution definition: ${e}`);let t=i,r=1;for(;this.n2oMap[t];)t=`${i}_${r}`,r+=1;return this.o2nMap[e]=t,this.n2oMap[t]=e,t},this.normalizedLocalId=e=>{const i=this.o2nMap[e];return(0,c.kG)(i,`dangling localId reference. Target: ${e}`),i},this.maybeNormalizedLocalId=e=>this.o2nMap[e],this.normalizeAttributes=()=>{this.normalized.attributes.forEach((e=>{this.options.keepRemovableProperties||delete e.attribute.alias;const i=(0,a.WP)(e),t=(0,a.WP)((0,o.ST)(e,(e=>e.noAlias().defaultLocalId())));e.attribute.localIdentifier=this.createUniqueMapping(i,t)}))},this.normalizeTotal=e=>{var i,t;return Object.assign(Object.assign({},e),{attributeIdentifier:null!==(i=this.maybeNormalizedLocalId(e.attributeIdentifier))&&void 0!==i?i:e.attributeIdentifier,measureIdentifier:null!==(t=this.maybeNormalizedLocalId(e.measureIdentifier))&&void 0!==t?t:e.measureIdentifier})},this.normalizeTotals=()=>{this.normalized.buckets.forEach((e=>{e.totals&&(e.totals=e.totals.map(this.normalizeTotal))}))},this.normalizeSimple=e=>{var i;e.measureDefinition.filters&&(e.measureDefinition.filters=null===(i=e.measureDefinition.filters)||void 0===i?void 0:i.filter((e=>!(0,n.II)(e)||!(0,n.Or)(e))))},this.normalizePoP=(e,i)=>{const t=e.popMeasureDefinition.measureIdentifier,r=this.maybeNormalizedLocalId(t)||this.normalizeMeasureByLocalId(t,i);e.popMeasureDefinition.measureIdentifier=r},this.normalizePreviousPeriod=(e,i)=>{const t=e.previousPeriodMeasure.measureIdentifier,r=this.maybeNormalizedLocalId(t)||this.normalizeMeasureByLocalId(t,i);e.previousPeriodMeasure.measureIdentifier=r},this.normalizeArithmetic=(e,i)=>{const t=e.arithmeticMeasure.measureIdentifiers.map((e=>this.maybeNormalizedLocalId(e)||this.normalizeMeasureByLocalId(e,i)));e.arithmeticMeasure.measureIdentifiers=t},this.normalizeMeasure=(e,i=new Set)=>{const t=(0,s.i1)(e),r=e.measure.definition;if(this.alreadyNormalized.find((i=>i===e)))return t;(0,c.kG)(!i.has(t),`circular dependency on measure with localId ${t}`),i.add(t),(0,s.Cg)(r)?this.normalizePoP(r,i):(0,s.V7)(r)?this.normalizePreviousPeriod(r,i):(0,s.B3)(r)?this.normalizeArithmetic(r,i):(0,s.BJ)(r)&&this.normalizeSimple(r),this.options.keepRemovableProperties||(delete e.measure.alias,delete e.measure.title,delete e.measure.format);const a=(0,s.i1)((0,l.oA)(e,(e=>e.noAlias().noTitle().defaultFormat().defaultLocalId()))),o=this.createUniqueMapping(t,a);return e.measure.localIdentifier=o,this.alreadyNormalized.push(e),o},this.normalizeMeasureByLocalId=(e,i)=>{const t=this.originalMeasures.get(e);return(0,c.kG)(t,`measure with localId ${e} could not be found`),this.normalizeMeasure(t,i)},this.normalizeMeasures=()=>{this.normalized.measures.forEach((e=>this.normalizeMeasure(e)))},this.normalizeFilters=()=>{this.normalized.filters.forEach((e=>{if((0,n.tG)(e)){const i=e.measureValueFilter.measure;(0,d.Mt)(i)&&(i.localIdentifier=this.normalizedLocalId(i.localIdentifier))}if((0,n.Ey)(e)){const{measure:i,attributes:t=[]}=e.rankingFilter;[...t,i].filter(d.Mt).forEach((e=>{e.localIdentifier=this.normalizedLocalId(e.localIdentifier)}))}}))},this.normalizeSorts=()=>{this.normalized.sortBy.forEach((e=>{(0,m.sx)(e)?e.attributeSortItem.attributeIdentifier=this.normalizedLocalId(e.attributeSortItem.attributeIdentifier):(0,m.Ti)(e)&&e.measureSortItem.locators.forEach((e=>{(0,m.at)(e)?e.attributeLocatorItem.attributeIdentifier=this.normalizedLocalId(e.attributeLocatorItem.attributeIdentifier):(0,m.MC)(e)&&(e.measureLocatorItem.measureIdentifier=this.normalizedLocalId(e.measureLocatorItem.measureIdentifier))}))}))},this.normalizeDimensions=()=>{this.normalized.dimensions.forEach((e=>{e.itemIdentifiers=e.itemIdentifiers.map((e=>e===u.Pm?e:this.normalizedLocalId(e))),e.totals&&e.totals.forEach((e=>{e.attributeIdentifier=this.normalizedLocalId(e.attributeIdentifier),e.measureIdentifier=this.normalizedLocalId(e.measureIdentifier)}))}))},this.normalize=()=>(this.normalizeAttributes(),this.normalizeMeasures(),this.normalizeFilters(),this.normalizeSorts(),this.normalizeDimensions(),this.normalizeTotals(),{normalized:this.normalized,original:this.original,n2oMap:this.n2oMap});const t=f()(this.original),r=t.filters.filter((e=>(0,n.ZU)(e)?!(0,n.Or)(e)||(0,n.Vc)(e):!(0,n.tG)(e)||void 0!==(0,n.Mr)(e)));this.normalized=Object.assign(Object.assign({},t),{filters:r}),t.measures.forEach((e=>this.originalMeasures.set((0,s.i1)(e),e)))}}},15266:(e,i,t)=>{t.d(i,{CY:()=>o,cX:()=>m,hz:()=>n,ow:()=>l});var r=t(37693),a=t.n(r);function s(e){return void 0!==e&&"number"==typeof e&&e>=0&&e<256}function o(e){if(!a()(e)){const{guid:i,fill:t}=e;return"string"==typeof i&&void 0!==i&&function(e){if(!a()(e)){const{r:i,g:t,b:r}=e;return s(i)&&s(t)&&s(r)}return!1}(t)}return!1}function n(e){return!a()(e)&&"guid"===e.type}function l(e){return!a()(e)&&"rgb"===e.type}function d(e){const{r:i,g:t,b:r}=e.fill;return`rgb(${i},${t},${r})`}function m(e){return e.map(d)}},10674:(e,i,t)=>{t.d(i,{Z:()=>o});var r=t(61550),a=t(56130),s=t(73734);function o(e){if((0,s.kG)(e,"bucketItem must be specified"),(0,r.dt)(e))return(0,r.WP)(e);if((0,a.kb)(e))return(0,a.i1)(e);throw new s.ej(`Unknown bucketItem "${e}"`)}}}]);
//# sourceMappingURL=49553417c6296db0d928.js.map